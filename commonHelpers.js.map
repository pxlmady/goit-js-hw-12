{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["// Імпортуємо необхідні бібліотеки та стилі\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\n// Отримуємо посилання на необхідні DOM-елементи\nconst searchForm = document.getElementById(\"searchForm\"); // Форма пошуку\nconst searchInput = document.getElementById(\"searchInput\"); // Поле введення пошукового запиту\nconst gallery = document.getElementById(\"gallery\"); // Галерея зображень\nconst loadMoreButton = document.getElementById(\"loadMoreButton\"); // Кнопка \"Load more\"\n\n// Ключ API та базовий URL для запитів до Pixabay API\nconst apiKey = \"41962828-ff4c1ad2c8e7f95d6127e6141\";\nconst baseUrl = \"https://pixabay.com/api/\";\n\n// Кількість зображень на сторінці та поточна сторінка\nconst perPage = 40;\nlet currentPage = 1;\nlet firstLoad = true;\n\n// Ініціалізація lightbox для відображення зображень\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captions: true,\n  captionSelector: 'img',\n  captionType: 'attr',\n  captionsData: 'title',\n  captionPosition: 'bottom',\n  animationSlide: false,\n});\n\n// Функція для показу завантажувача\nfunction showLoader() {\n  const loader = document.createElement('span');\n  loader.classList.add('loader');\n  document.body.appendChild(loader);\n}\n\n// Функція для приховання завантажувача\nfunction hideLoader() {\n  const loader = document.querySelector('.loader');\n  if (loader) {\n    loader.remove();\n  }\n}\n\n// Функція для показу сповіщення про завантаження\nfunction showLoadingNotification() {\n  iziToast.info({\n    title: \"Info\",\n    message: \"Loading...\",\n    position: \"topCenter\",\n    timeout: 2000,\n  });\n}\n\n// Функція для показу кнопки \"Load more\"\nfunction showLoadMoreButton() {\n  loadMoreButton.style.display = \"block\";\n}\n\n// Функція для приховування кнопки \"Load more\"\nfunction hideLoadMoreButton() {\n  loadMoreButton.style.display = \"none\";\n}\n\n// Функція для показу повідомлення про завершення результатів пошуку\nfunction showEndMessage() {\n  iziToast.info({\n    title: \"Info\",\n    message: \"We're sorry, but you've reached the end of search results.\",\n    position: \"topCenter\",\n  });\n}\n\n// Функція для очищення галереї\nfunction clearGallery() {\n  gallery.innerHTML = \"\";\n}\n\n// Функція для асинхронного отримання та відображення даних\nasync function fetchData(searchTerm) {\n  try {\n    showLoadingNotification();\n    showLoader();\n\n    const response = await fetch(`${baseUrl}?key=${apiKey}&q=${searchTerm}&image_type=photo&orientation=horizontal&safesearch=true&page=${currentPage}&per_page=${perPage}`);\n    const data = await response.json();\n\n    hideLoader();\n\n    if (data.hits.length === 0) {\n      iziToast.info({ title: \"Info\", message: \"Sorry, there are no images matching your search query. Please try again!\" });\n    } else {\n      if (!gallery) {\n        console.error(\"Error fetching images: Gallery element is null\");\n        return;\n      }\n\n      const imagesToAdd = [];\n\n      data.hits.forEach(image => {\n        const imageLink = document.createElement(\"a\");\n        imageLink.href = image.largeImageURL;\n\n        const imgElement = document.createElement(\"img\");\n        imgElement.src = image.webformatURL;\n        imgElement.alt = image.tags;\n        imgElement.title = `${image.tags}`;\n\n        const detailsContainer = document.createElement(\"div\");\n        detailsContainer.classList.add(\"image-details\");\n\n        const likesElement = document.createElement(\"p\");\n        likesElement.textContent = `Likes: ${image.likes}`;\n\n        const viewsElement = document.createElement(\"p\");\n        viewsElement.textContent = `Views: ${image.views}`;\n\n        const commentsElement = document.createElement(\"p\");\n        commentsElement.textContent = `Comments: ${image.comments}`;\n\n        const downloadsElement = document.createElement(\"p\");\n        downloadsElement.textContent = `Downloads: ${image.downloads}`;\n\n        detailsContainer.appendChild(likesElement);\n        detailsContainer.appendChild(viewsElement);\n        detailsContainer.appendChild(commentsElement);\n        detailsContainer.appendChild(downloadsElement);\n\n        imageLink.appendChild(imgElement);\n        imageLink.appendChild(detailsContainer);\n        \n        imagesToAdd.push(imageLink);\n      });\n\n      imagesToAdd.forEach(imageLink => {\n        gallery.appendChild(imageLink);\n      });\n\n      lightbox.refresh();\n\n      if (currentPage * perPage >= data.totalHits) {\n        hideLoadMoreButton();\n        showEndMessage();\n      } else {\n        showLoadMoreButton();\n        if (!firstLoad) {\n          // Получаем высоту одной карточки галереи\n          const cardHeight = gallery.lastElementChild.getBoundingClientRect().height;\n          // Прокручиваем страницу на высоту двух карточек галереи\n          window.scrollBy({ top: cardHeight * 2, behavior: 'smooth' });\n        } else {\n          firstLoad = false;\n        }\n      }\n    }\n  } catch (error) {\n    hideLoader();\n    iziToast.error({ title: \"Error\", message: \"An error occurred while fetching images. Please try again later.\" });\n    console.error(\"Error fetching images:\", error);\n  }\n}\n\n// Додамо подію відправки форми для пошуку\nsearchForm.addEventListener(\"submit\", function (e) {\n  e.preventDefault();\n  const searchTerm = searchInput.value.trim();\n\n  if (searchTerm === \"\") {\n    iziToast.error({ title: \"Error\", message: \"Please enter a search term\" });\n    return;\n  }\n\n  currentPage = 1;\n  firstLoad = true;\n  clearGallery();\n  fetchData(searchTerm);\n});\n\n// Додамо подію кліку на кнопці \"Load more\"\nloadMoreButton.addEventListener(\"click\", function () {\n  currentPage++;\n  fetchData(searchInput.value.trim());\n});\n"],"names":["searchForm","searchInput","gallery","loadMoreButton","apiKey","baseUrl","perPage","currentPage","firstLoad","lightbox","SimpleLightbox","showLoader","loader","hideLoader","showLoadingNotification","iziToast","showLoadMoreButton","hideLoadMoreButton","showEndMessage","clearGallery","fetchData","searchTerm","data","imagesToAdd","image","imageLink","imgElement","detailsContainer","likesElement","viewsElement","commentsElement","downloadsElement","cardHeight","error","e"],"mappings":"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"}